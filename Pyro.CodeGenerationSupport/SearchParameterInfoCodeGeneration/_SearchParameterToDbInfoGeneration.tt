<#@ template debug="true" language="C#" hostSpecific="true" #>
<#@ output extension=".cs" #>
<#@ include file="$(SolutionDir)Blaze.CodeGenerationSupport\CodeGenFileManager\TemplateFileManagerV2.1.ttinclude" #>
<#@ Assembly Name="System.Core" #>
<#@ Assembly Name="$(SolutionDir)packages\Newtonsoft.Json.8.0.2\lib\net45\Newtonsoft.Json.dll"#>
<#@ Assembly Name="$(SolutionDir)packages\Hl7.Fhir.STU3.0.90.6-alpha7\lib\net45\Hl7.Fhir.STU3.Core.dll"#>
<#@ Assembly Name="$(SolutionDir)Blaze.CodeGenerationSupport\bin\Release\Blaze.CodeGenerationSupport.dll"#>
<#@ import namespace="System" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="Blaze.CodeGenerationSupport.FhirApiIntrospection" #>
<#@ import namespace="Blaze.CodeGenerationSupport.RepositoryCodeGeneration" #>
<#@ import namespace="Blaze.CodeGenerationSupport.SearchParameterInfoCodeGeneration" #>


<#
  var manager = TemplateFileManager.Create(this);
  // Any output below here will go to the BlazeDbModelCodeGenerator.cs
  var SearchParameterToDbInfoGeneration = new Blaze.CodeGenerationSupport.SearchParameterInfoCodeGeneration.SearchParameterToDbInfoGeneration();
  SearchParameterToDbInfoGeneration.Generate();
  var ResourceSearchParamInfoList = SearchParameterToDbInfoGeneration.ResourceSearchParamInfoList;
  
  manager.StartNewFile(string.Format("{0}.cs","DtoSupportedSearchParametersFactory"), "Blaze.Common", "Search");
#>
using System.Collections.Generic;
using Blaze.Common.Enum;
using Hl7.Fhir.Model;

namespace Blaze.Common.BusinessEntities.Search
{
  public class DtoSupportedSearchParametersFactory
  {
    public static List<DtoSupportedSearchParameters> GetSupportedParametersForResourceTypeList(FHIRAllTypes ResourceType)
    {
      var List = new List<DtoSupportedSearchParameters>();
      Blaze.Common.BusinessEntities.Search.DtoSupportedSearchParameters.AddSupportedParametersForAllResources(List);
      DtoSupportedSearchParameters SupportedSearchParameter = null; 
      switch (ResourceType)
      {
<#
    foreach (var ResourceSearchParamInfo in ResourceSearchParamInfoList)
    {#>      
        case FHIRAllTypes.<#=ResourceSearchParamInfo.ResourceName#>:
          {            
<# 
      foreach (var ResourceSearchParamInfoItem in ResourceSearchParamInfo.ResourceSearchParamInfoItemList)
      {#>      
            SupportedSearchParameter = new DtoSupportedSearchParameters();
            SupportedSearchParameter.Name = FhirSearchEnum.SearchParameterNameType.<#=ResourceSearchParamInfoItem.SearchParameterNameType#>;
            SupportedSearchParameter.Resource = ResourceType;
            SupportedSearchParameter.IsDbCollection = <#=ResourceSearchParamInfoItem.IsDbCollection#>;
            SupportedSearchParameter.DbPropertyName = "<#=ResourceSearchParamInfoItem.DbBasePropertyName#>";
            SupportedSearchParameter.DbSearchParameterType = DatabaseEnum.DbIndexType.<#=ResourceSearchParamInfoItem.DbSearchParameterType#>;
            SupportedSearchParameter.ModifierList = new List<FhirSearchEnum.SearchModifierType>();
         <# 
        foreach (var Modifier in ResourceSearchParamInfoItem.ModifierList)
        {#>
   SupportedSearchParameter.ModifierList.Add(FhirSearchEnum.SearchModifierType.<#=Modifier#>);
<#
        }
#>
   SupportedSearchParameter.TypeModifierResourceList = new List<string>();
         <# 
        foreach (var ModifierTypeModifierResource in ResourceSearchParamInfoItem.TypeModifierResourceList)
        {#>
            SupportedSearchParameter.TypeModifierResourceList.Add("<#=ModifierTypeModifierResource#>");
<#
        }
#>
   SupportedSearchParameter.PrefixList = new List<FhirSearchEnum.SearchPrefixType>();
         <# 
        foreach (var Prefix in ResourceSearchParamInfoItem.PrefixList)
        {#>
           SupportedSearchParameter.PrefixList.Add(FhirSearchEnum.SearchPrefixType.<#=Prefix#>);
<#
        }
#>
   List.Add(SupportedSearchParameter);
<#
      }
#>
          }
          break;
<#
    }
#>
   default:
          break;
      }
      return List;
    }
  }
}
   

<#  
manager.Process();
#>
